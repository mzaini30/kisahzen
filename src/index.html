{% extends './layout/base.html' %}

{% block head %}
	{% from './macro/meta.html' import meta %}
	{$ meta() $}
{% endblock %}

{% block body %}
	<h1 class="judul">Kisah Zen</h1>

	<main class="semua-app" v-cloak @vue:mounted='cekKategori'>
		<section class="app" v-for='x in post'>
			<a :href="'/post/' + x.slug + '.html'" class="card">
				<img :src="x.gambar" alt="" />
				<p>
					<span class="judulnya">{{ x.judul }}</span>
					<span class="kategori">{{ x.kategori }}</span>
				</p>
			</a>
		</section>
	</main>

	<script type="module">
		import post from '/data/post.js'

		PetiteVue.createApp({
			post: post.reverse(),
			cekKategori(){
				if (location.search.includes('?kategori=')) {
					let kategorinya = new URLSearchParams(location.search).get('kategori')
					// console.log(kategorinya)
					this.post = post.reverse().filter(x => x.kategori == kategorinya)
				}
			}		
		}).mount('.semua-app')
	</script>

	<style lang="windi">
		h1 {
			@apply text-center text-3xl text-red-700 py-3 pb-5
		}
		.semua-app {
			@apply grid gap-2 grid-cols-4 <sm:grid-cols-2;
		}
		.app .card {
			@apply rounded overflow-hidden border border-gray-300 block
		}
		.app p {
			@apply p-2 text-sm
		}
		.judulnya {
			@apply block
		}
		.kategori {
			@apply bg-gray-200 rounded px-2 inline-block mt-1;
			font-size: 10px;
		}
	</style>
{% endblock %}